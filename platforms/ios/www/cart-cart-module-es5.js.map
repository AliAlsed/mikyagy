{"version":3,"sources":["./src/app/cart/cart.page.html","./src/app/cart/cart.module.ts","./src/app/cart/cart.page.scss","./src/app/cart/cart.page.ts"],"names":[],"mappings":"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","file":"cart-cart-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>\\n      <div class=\\\"tit-container\\\">\\n        <div class=\\\"titlee\\\">\\n          سلتك\\n        </div>\\n        <div class=\\\"backicon\\\">\\n          <ion-icon name=\\\"arrow-round-back\\\" (click)=\\\"back()\\\"></ion-icon>\\n        </div>\\n      </div>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-list>\\n    <ion-item-divider color=\\\"danger\\\" [hidden]=\\\"showEmptyCartMessage\\\">\\n      تفاصيل سلتك\\n    </ion-item-divider>\\n    <ion-item-divider color=\\\"danger\\\" [hidden]=\\\"!showEmptyCartMessage\\\">\\n      لا يوجد منتجات في السلة\\n    </ion-item-divider>\\n\\n    <ion-card color=\\\"light\\\" *ngFor=\\\"let item of cartItems; let i = index\\\">\\n      <ion-item color=\\\"light\\\">\\n\\n        <ion-thumbnail item-right>\\n          <img style=\\\"border-radius: 100%\\\" [src]=\\\"item.product.featured_src || item.product.images[0].src\\\" />\\n        </ion-thumbnail>\\n        <h6 style=\\\"font-weight: bold; margin:5px\\\">{{ item.product.name || item.product.title }}</h6>\\n        <p *ngIf=\\\"item.variation\\\"><span *ngFor=\\\"let att of item.variation.attributes\\\">{{ att.option | titlecase }}\\n            &nbsp;</span></p>\\n        <h6 *ngIf=\\\"!item.variation\\\"><span [innerHTML]=\\\"item.product.price_html\\\"></span><span\\n            *ngIf=\\\"item.product.sale_price\\\">\\n            {{ (item.product.regular_price - item.product.sale_price)/item.product.regular_price * 100  | number:'1.2-2'}}\\n            % OFF</span></h6>\\n        <h6 *ngIf=\\\"item.variation\\\"><span>{{ currency_symbol }}\\n            {{ item.variation.regular_price | number: '1.2-2'}}</span><span\\n            *ngIf=\\\"item.product.sale_price\\\">{{ (item.variation.regular_price - item.variation.sale_price)/item.variation.regular_price * 100  | number:'1.2-2'}}\\n            % OFF</span></h6>\\n      </ion-item>\\n      <ion-item class=\\\"compact\\\">\\n        <ion-row ion-no-padding>\\n          <ion-col size=\\\"8\\\" ion-no-padding>\\n            <ion-button fill=\\\"clear\\\" color=\\\"danger\\\" (click)=\\\"changeQty(item, i, -1)\\\">\\n              <ion-icon name=\\\"remove-circle\\\"></ion-icon>\\n            </ion-button>\\n            <ion-button color=\\\"dark\\\" fill=\\\"clear\\\">{{ item.qty }}</ion-button>\\n            <ion-button fill=\\\"clear\\\" color=\\\"danger\\\" (click)=\\\"changeQty(item, i, 1)\\\">\\n              <ion-icon name=\\\"add-circle\\\"></ion-icon>\\n            </ion-button>\\n          </ion-col>\\n          <ion-col size=\\\"4\\\" style=\\\"text-align: right;\\\">\\n            <ion-button small outline (click)=\\\"removeFromCart(item, i)\\\" style=\\\"width: 64px;\\\" color=\\\"danger\\\">ازالة\\n            </ion-button>\\n          </ion-col>\\n        </ion-row>\\n      </ion-item>\\n    </ion-card>\\n  </ion-list>\\n\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar color=\\\"light\\\">\\n\\n    <ion-row ion-no-padding>\\n      <ion-col ion-no-padding>\\n        <ion-button color=\\\"danger\\\" expand=\\\"block\\\">الكلي {{ currency_symbol }} {{ total | number}}\\n        </ion-button>\\n      </ion-col>\\n      <ion-col ion-no-padding>\\n        <ion-button color=\\\"danger\\\" expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"checkout()\\\">اكمال الطلب</ion-button>\\n      </ion-col>\\n    </ion-row>\\n\\n  </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [CartPage]\n})\nexport class CartPageModule {}\n","module.exports = \".compact .item-inner .input-wrapper ion-label {\\n  margin: 0 !important;\\n}\\n\\nion-content, ion-header {\\n  font-family: \\\"Cairo\\\", sans-serif;\\n  direction: rtl;\\n}\\n\\nion-toolbar {\\n  font-family: \\\"Cairo\\\", sans-serif;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGlhbG1vc295L0Rlc2t0b3AvZGV2ZWxvcG1lbnQvcmFtaS9taWt5YWd5L3NyYy9hcHAvY2FydC9jYXJ0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvY2FydC9jYXJ0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG9CQUFBO0FDQ0o7O0FERUE7RUFDRyxnQ0FBQTtFQUNBLGNBQUE7QUNDSDs7QURDQTtFQUNJLGdDQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9jYXJ0L2NhcnQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbXBhY3QgLml0ZW0taW5uZXIgLmlucHV0LXdyYXBwZXIgaW9uLWxhYmVsIHtcbiAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcbn1cblxuaW9uLWNvbnRlbnQsIGlvbi1oZWFkZXIge1xuICAgZm9udC1mYW1pbHk6ICdDYWlybycsIHNhbnMtc2VyaWY7XG4gICBkaXJlY3Rpb246IHJ0bDtcbn1cbmlvbi10b29sYmFye1xuICAgIGZvbnQtZmFtaWx5OiAnQ2Fpcm8nLCBzYW5zLXNlcmlmO1xufSIsIi5jb21wYWN0IC5pdGVtLWlubmVyIC5pbnB1dC13cmFwcGVyIGlvbi1sYWJlbCB7XG4gIG1hcmdpbjogMCAhaW1wb3J0YW50O1xufVxuXG5pb24tY29udGVudCwgaW9uLWhlYWRlciB7XG4gIGZvbnQtZmFtaWx5OiBcIkNhaXJvXCIsIHNhbnMtc2VyaWY7XG4gIGRpcmVjdGlvbjogcnRsO1xufVxuXG5pb24tdG9vbGJhciB7XG4gIGZvbnQtZmFtaWx5OiBcIkNhaXJvXCIsIHNhbnMtc2VyaWY7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { Router } from '@angular/router';\nimport { ToastController, Events } from '@ionic/angular';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n})\nexport class CartPage implements OnInit {\n\n  cartItems: any[] = [];\n  total: number;\n  showEmptyCartMessage: boolean = false;\n  currency_symbol: string = \"د.ع\";\n\n  constructor(public toastController: ToastController, private storage: Storage, private router: Router, public events: Events) { }\n\n  ngOnInit() {\n    this.total = 0.0;\n    this.storage.ready().then(() => {\n      this.storage.get(\"cart\").then((data) => {\n        this.cartItems = data;\n        console.log(this.cartItems);\n        if (this.cartItems && this.cartItems.length > 0) {\n          let i = 0;\n          this.cartItems.forEach((item, index) => {\n\n            if (!item.variation) {\n              this.total = this.total + (item.product.price * item.qty);\n              console.log(item.product.price * item.qty)\n            }\n            else {\n              console.log(item.variation.attributes[i].name + ' opt ' + item.variation.attributes[i].option);\n              this.total = this.total + (parseFloat(item.variation.price) * item.qty);\n              console.log(parseFloat(item.variation.price) * item.qty)\n            }\n          })\n\n        } else {\n          this.showEmptyCartMessage = true;\n        }\n      }\n      );\n    });\n  }\n\n  back() {\n    this.router.navigate(['/home']);\n  }\n\n  removeFromCart(item, i) {\n\n    let price;\n    if (!item.variation)\n      price = item.product.price;\n    else\n      price = parseFloat(item.variation.price);\n    let qty = item.qty;\n\n    this.cartItems.splice(i, 1);\n\n    this.storage.set(\"cart\", this.cartItems).then(() => {\n      this.total = this.total - (price * qty);\n\n    });\n\n    if (this.cartItems.length == 0) {\n      this.showEmptyCartMessage = true;\n    }\n\n    this.events.publish(\"updateCart\");\n  }\n  checkout() {\n    this.storage.get(\"cart\").then((data) => {\n      this.cartItems = data;\n\n      //FIX: Prevent checkout if cart is empty\n      if (this.cartItems && this.cartItems.length > 0) {\n        this.storage.get(\"userIn\").then((data) => {\n          if (data != null && data == true) {\n            this.router.navigate(['/checkout']);\n          } else {\n            this.presentToast('يرجى تسجيل الدخول');\n            this.router.navigate(['/signup']);\n          }\n        })\n      } else {\n        this.presentToast('السلة فارغة');\n      }\n    });\n  }\n\n  changeQty(item: any, index: number, change: number) {\n\n    let price;\n\n    if (!item.variation)\n      price = item.product.price;\n    else\n      price = parseFloat(item.variation.price);\n\n    let qty: number = item.qty;\n\n    if (change < 0 && item.qty == 1) {\n      return;\n    }\n\n    qty = qty + change;\n    item.qty = qty;\n    item.amount = qty * price;\n\n\n    this.cartItems[index] = item;\n\n    this.storage.set(\"cart\", this.cartItems).then(() => {\n      this.presentToast('تم تحديث السلة');\n    });\n    this.total = (parseFloat(this.total.toString()) + (parseFloat(price.toString()) * change));\n  }\n\n  async presentToast(message) {\n    const toast = await this.toastController.create({\n      message,\n      duration: 1000\n    });\n    await toast.present();\n  }\n\n}\n"],"sourceRoot":""}