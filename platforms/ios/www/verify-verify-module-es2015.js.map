{"version":3,"sources":["./src/app/verify/verify.page.html","./src/app/services/window.service.ts","./src/app/verify/verify.module.ts","./src/app/verify/verify.page.scss","./src/app/verify/verify.page.ts"],"names":[],"mappings":"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","file":"verify-verify-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>\\n      <div class=\\\"tit-container\\\">\\n        <div class=\\\"titlee\\\">\\n          التحقق من حساب\\n        </div>\\n      </div>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <div class=\\\"signin\\\">\\n    <div class=\\\"header\\\">\\n      <h1>تاكيد رقم الهاتف</h1>\\n      <p>الرجاء تاكيد رقم الهاتف لاستخدام التطبيق</p>\\n    </div>\\n    <div class=\\\"main\\\">\\n      <form role=\\\"form\\\" #f=\\\"ngForm\\\">\\n        <div *ngIf=\\\"!check\\\">\\n          <ion-item>\\n            <ion-input class=\\\"form-control\\\" placeholder=\\\"رقم الهاتف\\\" type=\\\"tel\\\" name=\\\"phone\\\" [(ngModel)]=\\\"phone\\\"\\n              required minlength=\\\"11\\\">\\n            </ion-input>\\n          </ion-item>\\n          <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" type=\\\"buttom\\\" color=\\\"danger\\\" (click)=\\\"sendcode()\\\"\\n            [disabled]=\\\"!f.valid\\\">\\n            ارسال رمز التحقيق</ion-button>\\n        </div>\\n      </form>\\n\\n      <div *ngIf=\\\"check\\\">\\n        <form role=\\\"form\\\" #f=\\\"ngForm\\\">\\n          <ion-item>\\n            <ion-input class=\\\"form-control\\\" placeholder=\\\"يرجى ادخال رمز التحقيق\\\" name=\\\"code\\\"\\n              [(ngModel)]=\\\"verificationCode\\\" required minlength=\\\"6\\\">\\n            </ion-input>\\n          </ion-item>\\n          <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"verifyLoginCode()\\\" color=\\\"danger\\\" type=\\\"buttom\\\"\\n            [disabled]=\\\"!f.valid\\\">\\n            تاكيد رقم\\n            الهاتف</ion-button>\\n        </form>\\n      </div>\\n    </div>\\n  </div>\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <div id=\\\"recaptcha-container\\\"></div>\\n  </ion-toolbar>\\n</ion-footer>\"","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WindowService {\n  get windowRef() {\n    return window\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VerifyPage } from './verify.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VerifyPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [VerifyPage]\n})\nexport class VerifyPageModule {}\n","module.exports = \"ion-title,\\nion-content {\\n  font-family: \\\"Cairo\\\", sans-serif;\\n  direction: rtl;\\n}\\n\\nimg {\\n  width: 150px;\\n  height: 150px;\\n}\\n\\n.signin {\\n  text-align: center;\\n}\\n\\n.header {\\n  text-align: center;\\n}\\n\\n.logos {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n  margin-top: 10px;\\n  margin-bottom: 10px;\\n  -webkit-box-align: center;\\n          align-items: center;\\n}\\n\\nion-input {\\n  font-family: \\\"Cairo\\\", sans-serif;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGlhbG1vc295L0Rlc2t0b3AvZGV2ZWxvcG1lbnQvcmFtaS9taWt5YWd5L3NyYy9hcHAvdmVyaWZ5L3ZlcmlmeS5wYWdlLnNjc3MiLCJzcmMvYXBwL3ZlcmlmeS92ZXJpZnkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztFQUVJLGdDQUFBO0VBQ0EsY0FBQTtBQ0NKOztBREVBO0VBQ0ksWUFBQTtFQUNBLGFBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0FDQ0o7O0FERUE7RUFDSSxrQkFBQTtBQ0NKOztBREVBO0VBQ0ksb0JBQUE7RUFBQSxhQUFBO0VBQ0Esd0JBQUE7VUFBQSx1QkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0FDQ0o7O0FERUE7RUFDSSxnQ0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvdmVyaWZ5L3ZlcmlmeS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tdGl0bGUsXG5pb24tY29udGVudCB7XG4gICAgZm9udC1mYW1pbHk6ICdDYWlybycsIHNhbnMtc2VyaWY7XG4gICAgZGlyZWN0aW9uOiBydGw7XG59XG5cbmltZyB7XG4gICAgd2lkdGg6IDE1MHB4O1xuICAgIGhlaWdodDogMTUwcHg7XG59XG5cbi5zaWduaW4ge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmhlYWRlciB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyXG59XG5cbi5sb2dvcyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuaW9uLWlucHV0IHtcbiAgICBmb250LWZhbWlseTogJ0NhaXJvJywgc2Fucy1zZXJpZjtcbn0iLCJpb24tdGl0bGUsXG5pb24tY29udGVudCB7XG4gIGZvbnQtZmFtaWx5OiBcIkNhaXJvXCIsIHNhbnMtc2VyaWY7XG4gIGRpcmVjdGlvbjogcnRsO1xufVxuXG5pbWcge1xuICB3aWR0aDogMTUwcHg7XG4gIGhlaWdodDogMTUwcHg7XG59XG5cbi5zaWduaW4ge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5oZWFkZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5sb2dvcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG5pb24taW5wdXQge1xuICBmb250LWZhbWlseTogXCJDYWlyb1wiLCBzYW5zLXNlcmlmO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { DataService } from '../services/data.service'\nimport { WindowService } from '../services/window.service';\nimport { FirebaseService } from '../services/firebase.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { User } from '../models/user.model';\nimport { Storage } from '@ionic/storage';\nimport * as firebase from 'firebase/app';\n\n@Component({\n  selector: 'app-verify',\n  templateUrl: './verify.page.html',\n  styleUrls: ['./verify.page.scss'],\n})\nexport class VerifyPage implements OnInit {\n\n  isComplete = false;\n  fromFacebook: any;\n  phone: any;\n  windowRef: any;\n  verificationCode: string;\n  check = false;\n\n  constructor(public data: DataService,\n    private user: User,\n    private router: Router,\n    private win: WindowService,\n    private storage: Storage,\n    private fire: FirebaseService,\n\n    private routerParam: ActivatedRoute) {\n    this.routerParam.params.subscribe(params => {\n      this.fromFacebook = params['fromfacebook'];\n    });\n  }\n\n  ngOnInit() {\n    this.storage.set('verify', false);\n    this.windowRef = this.win.windowRef;\n    this.windowRef.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {\n      'size': 'invisible',\n    });\n    this.windowRef.recaptchaVerifier.render();\n    this.data.currentMessage.subscribe(data => {\n      let info = JSON.parse(JSON.stringify(data));\n      this.user.firstname = info.firstname;\n      this.user.password = info.password;\n      this.user.lastname = info.lastname;\n      this.user.email = info.email;\n      this.user.phone = info.phone;\n      this.user.id = info.id;\n      this.user.imgname = info.imgname;\n    });\n\n  }\n\n  async sendcode() {\n    this.storage.set('verify', false);\n    this.user.phone = this.phone;\n    const appVerifier = this.windowRef.recaptchaVerifier;\n    await firebase.auth().signInWithPhoneNumber('+964' + this.user.phone, appVerifier)\n      .then(result => {\n        this.windowRef.confirmationResult = result;\n        this.check = true;\n        this.fire.presentToast(\"تم ارسال رمز التحقيق\");\n      })\n      .catch(error => {\n        this.check = false;\n        console.log(error)\n        this.fire.presentToast(error);\n      });\n  }\n\n  async verifyLoginCode() {\n    this.storage.set('verify', false);\n    await this.windowRef.confirmationResult\n      .confirm(this.verificationCode)\n      .then(result => {\n        console.log(result.user);\n        if (this.fromFacebook == \"no\") {\n          this.fire.register(this.user).then((user) => {\n            this.isComplete = true;\n            this.storage.set('verify', true);\n            this.fire.presentToast('تم التحقق من الهاتف بنجاح');\n            this.back();\n            console.log(user);\n          }, (e) => {\n            this.storage.set('verify', false);\n            this.isComplete = false;\n            console.log(e);\n            this.fire.presentToast(e);\n          });\n        }\n        else if (this.fromFacebook == \"yes\") {\n          this.isComplete = true;\n          this.fire.presentToast('تم التحقق من الهاتف بنجاح');\n          this.storage.set('verify', true);\n          this.user.password = null;\n          this.user.imgname = null;\n          this.fire.addRealTimeData('users', this.user.id, this.user);\n          this.back();\n        }\n      })\n      .catch(error => {\n        this.storage.set('verify', false);\n        console.log(error, \"Incorrect code entered?\");\n        this.fire.presentToast(error);\n      });\n  }\n\n  back() {\n    if (!this.isComplete && (this.user.imgname != undefined || this.user.imgname != null)) {\n      this.fire.deleteStorageFile('profiles', this.user.imgname);\n    }\n    else if (!this.isComplete) {\n      this.storage.set('verify', false);\n    }\n    this.router.navigate(['/home']);\n  }\n}\n"],"sourceRoot":""}